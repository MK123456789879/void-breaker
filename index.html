<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Void Breaker</title>
    <style>
        body {
            margin: 0;
            overflow: hidden;
            background-color: #000;
            color: #0f0;
            font-family: 'Courier New', Courier, monospace;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        
        /* Het Canvas (het spel) */
        #gameCanvas {
            border: 2px solid #333;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.2);
            background-color: #000;
        }

        /* De UI die bovenop het spel ligt (tekst en balk) */
        #ui-layer {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            pointer-events: none; /* Zorgt dat klikken door de tekst heen gaat */
            width: 100%;
        }

        #progress-bar {
            width: 300px;
            height: 20px;
            border: 2px solid #0f0;
            margin: 20px auto;
            display: block;
        }

        #progress-bar-fill {
            height: 100%;
            background-color: #0f0;
            width: 0%;
            transition: width 0.2s;
        }

        .blink {
            animation: blinker 1s linear infinite;
        }

        @keyframes blinker {
            50% { opacity: 0; }
        }
    </style>
</head>
<body>

    <canvas id="gameCanvas"></canvas>

    <div id="ui-layer">
        <h2 id="status-text">INITIALIZING...</h2>
        <div id="progress-bar">
            <div id="progress-bar-fill"></div>
        </div>
    </div>

<script>
    // --- 1. INSTELLINGEN ---
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    
    // Maak het canvas mooi groot
    canvas.width = 800;
    canvas.height = 600;

    // JOUW GITHUB LINK (Hier haalt hij de bestanden vandaan)
    const REPO_URL = 'https://mk123456789879.github.io/void-breaker';

    let gameActive = false; // Schakelaar: is het spel begonnen?

    // --- 2. ASSETS (Plaatjes & Geluid) ---
    const assetsToLoad = {
        images: [
             // Zodra je hero plaatje weer werkt, haal je de // weg op de volgende regel:
             // { name: 'hero', url: `${REPO_URL}/assets/img/hero_straight.png` } 
        ],
        audio: [
            { name: 'voice_pre', url: `${REPO_URL}/assets/audio/voice/pre_score.mp3` },
            { name: 'voice_post', url: `${REPO_URL}/assets/audio/voice/post_score.mp3` },
            { name: 'music_end', url: `${REPO_URL}/assets/audio/music/music_ending.mp3` }
        ]
    };

    let loadedCount = 0;
    let totalAssets = (assetsToLoad.images.length + assetsToLoad.audio.length) || 1; 
    const assets = { img: {}, audio: {} };

    // --- 3. HET LADEN ---
    function init() {
        console.log("Start laden...");
        
        // Als er niks te laden is (omdat lijst leeg is), doe alsof we klaar zijn
        if (assetsToLoad.images.length === 0 && assetsToLoad.audio.length === 0) {
            finishLoading();
            return;
        }

        // Audio laden
        assetsToLoad.audio.forEach(item => {
            const aud = new Audio();
            aud.src = item.url;
            aud.oncanplaythrough = () => handleAssetLoaded();
            aud.onerror = () => handleAssetLoaded(); // Ook bij fout doorgaan
            aud.load();
        });

        // Plaatjes laden
        assetsToLoad.images.forEach(item => {
            const img = new Image();
            img.src = item.url;
            img.onload = () => {
                assets.img[item.name] = img;
                handleAssetLoaded();
            };
            img.onerror = () => handleAssetLoaded();
        });
        
        // Start alvast de 'loop', die wacht tot gameActive true is
        requestAnimationFrame(gameLoop);
    }

    function handleAssetLoaded() {
        loadedCount++;
        // Update de groene balk
        const pct = Math.floor((loadedCount / totalAssets) * 100);
        document.getElementById('progress-bar-fill').style.width = pct + '%';
        document.getElementById('status-text').innerText = `SYSTEM LOADING... ${pct}%`;

        if (loadedCount >= totalAssets) {
            finishLoading();
        }
    }

    function finishLoading() {
        console.log("Alles geladen!");
        const statusText = document.getElementById('status-text');
        
        // Verander tekst en laat knipperen
        statusText.innerText = "> CLICK TO INITIALIZE <";
        statusText.classList.add('blink');
        
        // Verberg de laadbalk
        document.getElementById('progress-bar').style.display = 'none';

        // Maak scherm klikbaar
        document.body.style.cursor = "pointer";
        window.addEventListener('click', startGame, { once: true });
    }

    // --- 4. START HET SPEL ---
    function startGame() {
        console.log("Start geklikt!");
        gameActive = true; // ZET SPEL AAN
        
        // Verberg de tekst
        document.getElementById('ui-layer').style.display = 'none';
        
        // Hier zou je muziek kunnen starten
        // if(assets.audio['voice_pre']) assets.audio['voice_pre'].play();
    }

    // --- 5. DE GAME LOOP (HET TEKENEN) ---
    function gameLoop() {
        // 1. Wis het scherm
        ctx.fillStyle = "black";
        ctx.fillRect(0, 0, canvas.width, canvas.height);

        // 2. Wacht tot speler klikt
        if (!gameActive) {
            // Zolang er niet geklikt is, tekenen we niks bijzonders.
            // De HTML tekst ("CLICK TO INITIALIZE") staat er bovenop.
            requestAnimationFrame(gameLoop);
            return;
        }

        // --- HIER BEGINT HET ECHTE SPEL ---
        
        // Teken sterren (achtergrond)
        ctx.fillStyle = "white";
        ctx.fillRect(100, 200, 2, 2);
        ctx.fillRect(500, 100, 2, 2);
        ctx.fillRect(700, 500, 2, 2);

        // Teken Hero (Schip)
        if (assets.img['hero']) {
            ctx.drawImage(assets.img['hero'], canvas.width/2 - 25, canvas.height - 100);
        } else {
            // Als er geen plaatje is, teken een groene driehoek
            ctx.save();
            ctx.translate(canvas.width/2, canvas.height - 100);
            ctx.fillStyle = "#0f0";
            ctx.beginPath();
            ctx.moveTo(0, -20);
            ctx.lineTo(20, 20);
            ctx.lineTo(-20, 20);
            ctx.fill();
            ctx.restore();
        }

        // Blijf herhalen
        requestAnimationFrame(gameLoop);
    }

    // Starten maar!
    init();

</script>
</body>
</html>
